<?php include("header.php") ?>

<section class="breadcrumb">
    <div class="container">
        <div class="row">
            <div class="breadcrumb-content">
                <h6><a href="">Home</a></h6>
                <h6>>></h6>
                <h6><a href="">Innovation Lab</a></h6>
            </div>
        </div>
    </div>
</section>

<section>
    <div class="container">
        <div class="row">
            <div class="theme-title">
                <h1>Innovation <span>Labs</span></h1>
                <p>
                    Explore our innovative learning programs designed for different
                    age groups
                </p>
            </div>

            <div class="segment-category">
                <!-- Tab panes -->
                <div class="tab-content individual-segment">
                    <div class="row">
                        <div class="card-navigation">
                            <div class="title">
                                <h1><span>Quiz</span> Time</h1>
                            </div>
                            <div class="back">
                                <h6><a href="index.php"><i class="fa-solid fa-chevron-left"></i> Back</a></h6>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane container active" id="home">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="card quiz_card">
                                    <a type="button" data-bs-toggle="modal" data-bs-target="#blackhole">
                                        <div class="image">
                                            <img src="assets/images/quiz/blackhole-quiz.png"
                                                alt="" />
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>



<!-- The Modal -->
<div class="modal segment-popup" id="blackhole">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <!-- Modal body -->
            <div class="modal-body">
                <div class="owl-carousel owl-theme">
                    <div class="item" style="padding:0px;border-radius:20px">
                        <div class="quiz-container">
                            <div class="quiz-header-bar">
                                <div class="quiz-question-box">
                                    <span class="quiz-question-text">
                                      cyber  Which innovation allows doctors to look inside the human body without surgery?
                                    </span>
                                </div>
                                <div class="icon-atom">
                                    <img src="assets/images/quiz/quiz-icon-3.png" alt="">
                                </div>
                            </div>

                            <div class="quiz-main-content">
                                <div class="quiz-options-section">
                                    <div class="icon-dna">
                                        <img src="assets/images/quiz/quiz-icon-2.png" alt="">
                                    </div>
                                    <div class="quiz-options">
                                        <button class="answer-button correct-answer">X-ray imaging</button>
                                        <button class="answer-button">Electric Motor</button>
                                        <button class="answer-button">Steam Engine</button>
                                        <button class="answer-button">Printing Press</button>
                                    </div>
                                    <div class="icon-rocket">
                                        <img src="assets/images/quiz/quiz-icon-1.png" alt="">
                                    </div>
                                </div>

                                <div class="quiz-illustration-section ">
                                    <div class="illustration-placeholder quiz-main-image">
                                        <img src="assets/images/quiz/quiz-image-1.png" alt="">
                                    </div>
                                    <div class="bottom-circuit-decor">
                                        <img src="assets/images/quiz/quiz-icon-4.png" alt="">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="item" style="padding:0px;border-radius:20px">
                        <div class="quiz-container">
                            <div class="quiz-header-bar">
                                <div class="quiz-question-box">
                                    <span class="quiz-question-text">
                                        Which innovation consider the basics of mordern computers?
                                    </span>
                                </div>
                                <div class="icon-atom">
                                    <img src="assets/images/quiz/quiz-icon-3.png" alt="">
                                </div>
                            </div>

                            <div class="quiz-main-content">
                                <div class="quiz-options-section">
                                    <div class="icon-dna">
                                        <img src="assets/images/quiz/quiz-icon-2.png" alt="">
                                    </div>
                                    <div class="quiz-options">
                                        <button class="answer-button correct-answer">Abacus</button>
                                        <button class="answer-button">Analytical Engine</button>
                                        <button class="answer-button">Light Bulb</button>
                                        <button class="answer-button">Telegraph</button>
                                    </div>
                                    <div class="icon-rocket">
                                        <img src="assets/images/quiz/quiz-icon-1.png" alt="">
                                    </div>
                                </div>

                                <div class="quiz-illustration-section ">
                                    <div class="illustration-placeholder quiz-main-image">
                                        <img src="assets/images/quiz/quiz-image-2.png" alt="">
                                    </div>
                                    <div class="bottom-circuit-decor">
                                        <img src="assets/images/quiz/quiz-icon-4.png" alt="">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="item" style="padding:0px;border-radius:20px">
                        <div class="quiz-container">
                            <div class="quiz-header-bar">
                                <div class="quiz-question-box">
                                    <span class="quiz-question-text">
                                        What is the main innovation behind electric cars compared to traditional cars?
                                    </span>
                                </div>
                                <div class="icon-atom">
                                    <img src="assets/images/quiz/quiz-icon-3.png" alt="">
                                </div>
                            </div>

                            <div class="quiz-main-content">
                                <div class="quiz-options-section">
                                    <div class="icon-dna">
                                        <img src="assets/images/quiz/quiz-icon-2.png" alt="">
                                    </div>
                                    <div class="quiz-options">
                                        <button class="answer-button correct-answer">Gasoline engine</button>
                                        <button class="answer-button">Eletrical motors Powered by batteries</button>
                                        <button class="answer-button">Steam Engines</button>
                                        <button class="answer-button">Sails Engine</button>
                                    </div>
                                    <div class="icon-rocket">
                                        <img src="assets/images/quiz/quiz-icon-1.png" alt="">
                                    </div>
                                </div>

                                <div class="quiz-illustration-section ">
                                    <div class="illustration-placeholder quiz-main-image">
                                        <img src="assets/images/quiz/quiz-image-3.png" alt="">
                                    </div>
                                    <div class="bottom-circuit-decor">
                                        <img src="assets/images/quiz/quiz-icon-4.png" alt="">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="item" style="padding:0px;border-radius:20px">
                        <div class="quiz-container">
                            <div class="quiz-header-bar">
                                <div class="quiz-question-box">
                                    <span class="quiz-question-text">
                                        Which inovation helps farmers detect soil mositure and improve crop yield?
                                    </span>
                                </div>
                                <div class="icon-atom">
                                    <img src="assets/images/quiz/quiz-icon-3.png" alt="">
                                </div>
                            </div>

                            <div class="quiz-main-content">
                                <div class="quiz-options-section">
                                    <div class="icon-dna">
                                        <img src="assets/images/quiz/quiz-icon-2.png" alt="">
                                    </div>
                                    <div class="quiz-options">
                                        <button class="answer-button correct-answer">GPS and IOT sensors</button>
                                        <button class="answer-button">Stream Engine</button>
                                        <button class="answer-button">X-ray</button>
                                        <button class="answer-button">Printed Press</button>
                                    </div>
                                    <div class="icon-rocket">
                                        <img src="assets/images/quiz/quiz-icon-1.png" alt="">
                                    </div>
                                </div>

                                <div class="quiz-illustration-section ">
                                    <div class="illustration-placeholder quiz-main-image">
                                        <img src="assets/images/quiz/quiz-image-4.png" alt="">
                                    </div>
                                    <div class="bottom-circuit-decor">
                                        <img src="assets/images/quiz/quiz-icon-4.png" alt="">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="item" style="padding:0px;border-radius:20px">
                        <div class="quiz-container">
                            <div class="quiz-header-bar">
                                <div class="quiz-question-box">
                                    <span class="quiz-question-text">
                                        Elon Musk's innovation of resuable rockets primarily addresses which challenge
                                        in space exploration?
                                    </span>
                                </div>
                                <div class="icon-atom">
                                    <img src="assets/images/quiz/quiz-icon-3.png" alt="">
                                </div>
                            </div>

                            <div class="quiz-main-content">
                                <div class="quiz-options-section">
                                    <div class="icon-dna">
                                        <img src="assets/images/quiz/quiz-icon-2.png" alt="">
                                    </div>
                                    <div class="quiz-options">
                                        <button class="answer-button correct-answer">Lack of oxygen in space</button>
                                        <button class="answer-button">High cost of launching payloads into
                                            orbit</button>
                                        <button class="answer-button">Communication delay with satellites</button>
                                        <button class="answer-button">Solar Flare Hazards</button>
                                    </div>
                                    <div class="icon-rocket">
                                        <img src="assets/images/quiz/quiz-icon-1.png" alt="">
                                    </div>
                                </div>

                                <div class="quiz-illustration-section ">
                                    <div class="illustration-placeholder quiz-main-image">
                                        <img src="assets/images/quiz/quiz-image-5.png" alt="">
                                    </div>
                                    <div class="bottom-circuit-decor">
                                        <img src="assets/images/quiz/quiz-icon-4.png" alt="">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
            </div>
        </div>
    </div>
</div>



<?php include("footer.php") ?>

<script>
    $(document).ready(function () {
        // Initialize quiz score tracking for each modal
        const quizStates = {
            'blackhole': { score: 0, answered: 0 }
        };
        const totalQuestions = 5;

        // Auto-open modal based on URL hash
        function checkAndOpenModal() {
            const hash = window.location.hash;
            if (hash) {
                const modalId = hash.substring(1); // Remove the # symbol
                // Check if the modal exists
                if ($(`#${modalId}`).length) {
                    // Small delay to ensure page is fully loaded
                    setTimeout(function() {
                        $(`#${modalId}`).modal('show');
                    }, 500);
                }
            }
        }

        // Call the function on page load
        checkAndOpenModal();

        // Also handle when hash changes (if user navigates with browser back/forward)
        $(window).on('hashchange', function() {
            checkAndOpenModal();
        });

        // Function to get modal ID from button
        function getModalId($button) {
            return $button.closest('.modal').attr('id');
        }

        // Quiz answer validation
        $('.answer-button').on('click', function () {
            const $clickedButton = $(this);
            const $allButtons = $clickedButton.closest('.quiz-options').find('.answer-button');
            const $correctButton = $allButtons.filter('.correct-answer');
            const modalId = getModalId($clickedButton);

            // Check if this question was already answered
            const alreadyAnswered = $allButtons.prop('disabled');
            if (alreadyAnswered) return;

            // Disable all buttons after selection
            $allButtons.prop('disabled', true);
            quizStates[modalId].answered++;

            // Check if clicked button is correct
            if ($clickedButton.hasClass('correct-answer')) {
                quizStates[modalId].score++;
                // Correct answer - turn green
                $clickedButton.css({
                    'background-color': '#28a745',
                    'color': '#ffffff',
                    'border-color': '#28a745'
                });
            } else {
                // Wrong answer - turn clicked button red
                $clickedButton.css({
                    'background-color': '#dc3545',
                    'color': '#ffffff',
                    'border-color': '#dc3545'
                });

                // Show correct answer in green
                $correctButton.css({
                    'background-color': '#28a745',
                    'color': '#ffffff',
                    'border-color': '#28a745'
                });

                // Turn all other wrong answers red (except correct one)
                $allButtons.not('.correct-answer').not($clickedButton).css({
                    'background-color': '#dc3545',
                    'color': '#ffffff',
                    'border-color': '#dc3545',
                    'opacity': '0.6'
                });
            }

            // Check if all questions are answered
            if (quizStates[modalId].answered === totalQuestions) {
                setTimeout(function () {
                    showQuizResults(modalId);
                }, 1000);
            }
        });

        // Function to show quiz results
        function showQuizResults(modalId) {
            const quizScore = quizStates[modalId].score;
            const percentage = (quizScore / totalQuestions) * 100;
            let title = '';
            let icon = '';
            let message = '';

            if (percentage === 100) {
                title = 'üéâ Perfect Score!';
                icon = 'success';
                message = `Excellent! You got all ${totalQuestions} questions correct!`;
            } else if (percentage >= 80) {
                title = 'üëè Great Job!';
                icon = 'success';
                message = `You scored ${quizScore} out of ${totalQuestions}. Well done!`;
            } else if (percentage >= 60) {
                title = 'üëç Good Effort!';
                icon = 'info';
                message = `You scored ${quizScore} out of ${totalQuestions}. Keep learning!`;
            } else {
                title = 'üìö Keep Practicing!';
                icon = 'warning';
                message = `You scored ${quizScore} out of ${totalQuestions}. Try again to improve!`;
            }

            Swal.fire({
                title: title,
                html: `
                <div style="font-size: 18px; margin: 20px 0;">
                    ${message}
                </div>
                <div style="font-size: 48px; font-weight: bold; color: #4CAF50; margin: 20px 0;">
                    ${quizScore}/${totalQuestions}
                </div>
                <div style="font-size: 16px; color: #666;">
                    Percentage: ${percentage.toFixed(0)}%
                </div>
            `,
                icon: icon,
                confirmButtonText: 'Try Again',
                confirmButtonColor: '#3085d6',
                allowOutsideClick: false
            }).then((result) => {
                if (result.isConfirmed) {
                    // Reset quiz
                    resetQuiz(modalId);
                }
            });
        }

        // Function to reset quiz
        function resetQuiz(modalId) {
            quizStates[modalId].score = 0;
            quizStates[modalId].answered = 0;

            $(`#${modalId} .answer-button`).each(function () {
                $(this).prop('disabled', false);
                $(this).css({
                    'background-color': '',
                    'color': '',
                    'border-color': '',
                    'opacity': ''
                });
            });

            // Go back to first question
            var $carousel = $(`#${modalId}`).find('.owl-carousel');
            if ($carousel.hasClass('owl-loaded')) {
                $carousel.trigger('to.owl.carousel', [0, 300]);
            }
        }

        // Reset quiz when modal is closed
        $('#blackhole').on('hidden.bs.modal', function () {
            const modalId = $(this).attr('id');
            resetQuiz(modalId);
            // Remove hash from URL when modal is closed
            history.pushState("", document.title, window.location.pathname + window.location.search);
        });

        // Initialize modals with backdrop settings
        $('#blackhole').modal({
            backdrop: 'static',
            keyboard: false
        });

        // Initialize Owl Carousel for all modals
        $('#blackhole').on('shown.bs.modal', function () {
            var $carousel = $(this).find('.owl-carousel');

            if (!$carousel.hasClass('owl-loaded')) {
                $carousel.owlCarousel({
                    loop: false,
                    margin: 10,
                    nav: true,
                    dots: false,
                    navText: [
                        '<span class="owl-prev-icon"><i class="fa fa-chevron-left"></i></span>',
                        '<span class="owl-next-icon"><i class="fa fa-chevron-right"></i></span>'
                    ],
                    responsive: {
                        0: {
                            items: 1
                        },
                        600: {
                            items: 1
                        },
                        1000: {
                            items: 1
                        }
                    }
                });
            } else {
                $carousel.trigger('refresh.owl.carousel');
            }
        });
    });
</script>